#include <IRTransmitter.h>

#define IR_PIN D6
#define LED_PIN D7

unsigned int tv_on[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 1692,
  564, 564, 564, 564, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 39756};

unsigned int tv_off[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 1692,
  564, 564, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 39756};

unsigned int tv_hdmi_1[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564,
  564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 39756};

unsigned int tv_hdmi_2[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564,
  564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 39756};

unsigned int tv_hdmi_3[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564,
  1692, 564, 564, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 39756};

unsigned int tv_hdmi_4[68] = {9024, 4512, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 564, 1692, 564,
  1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 564, 564, 1692, 564, 564, 564, 564, 564, 564, 564, 564, 564,
  1692, 564, 1692, 564, 1692, 564, 564, 564, 1692, 564, 1692, 564, 1692, 564, 1692, 564, 564, 564, 39756};

IRTransmitter transmitter(IR_PIN, LED_PIN);

void receivedAction(const char *event, const char *data){
  Serial.println(data[0])
  switch ((int) data[0]) {
    case 48: // 0
      //Turn on tv
      transmitter.Transmit(tv_on, sizeof(tv_on) / sizeof(tv_on[0]));
      break;
    case 49: // 1
      //Turn off tv
      transmitter.Transmit(tv_off, sizeof(tv_off) / sizeof(tv_off[0]));
      break;
    case 50: // 2
      //Switch to hdmi 1
      transmitter.Transmit(tv_hdmi_1, sizeof(tv_hdmi_1) / sizeof(tv_hdmi_1[0]));
      break;
    case 51: // 3
      //Switch to hdmi 2
      transmitter.Transmit(tv_hdmi_2, sizeof(tv_hdmi_2) / sizeof(tv_hdmi_2[0]));
      break;
    case 52: // 4
      //Switch to hdmi 3
      transmitter.Transmit(tv_hdmi_3, sizeof(tv_hdmi_3) / sizeof(tv_hdmi_3[0]));
      break;
    case 53: // 5
      //Switch to hdmi 4
      transmitter.Transmit(tv_hdmi_4, sizeof(tv_hdmi_4) / sizeof(tv_hdmi_4[0]));
      break;
    default:
      Serial.println("Error!");
      break;
  }
}

void setup() {
  Serial.begin(9600);
  Particle.subscribe("tv_event", receivedAction);
}

void loop() {

}
